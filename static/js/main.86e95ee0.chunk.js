(this["webpackJsonpmedium-clone"]=this["webpackJsonpmedium-clone"]||[]).push([[0],{15:function(e,t,c){e.exports={main:"globalFeed_main__353J6",banner:"globalFeed_banner__3VMHL",content:"globalFeed_content__1NGhw",widgets:"globalFeed_widgets__3gWbJ",feeds:"globalFeed_feeds__17JVk"}},19:function(e,t,c){e.exports={container:"BackendErrorMessages_container__2tVbO","container--col":"BackendErrorMessages_container--col__3AHja",button:"BackendErrorMessages_button__16NcD",list:"BackendErrorMessages_list__mPXJW",item:"BackendErrorMessages_item__1Icea"}},6:function(e,t,c){e.exports={container:"TopBar_container__2axAQ","container--col":"TopBar_container--col__19Uog",button:"TopBar_button__2FU7G",nav:"TopBar_nav__2JYo2",logo:"TopBar_logo__1KMRO",list:"TopBar_list__2abX8",item:"TopBar_item__3ZNys",link:"TopBar_link__2VWae",active:"TopBar_active__371al",icon:"TopBar_icon__1Qm5W",avatar:"TopBar_avatar__3du95",image:"TopBar_image__3oYmw"}},8:function(e,t,c){e.exports={article:"Feed_article__3w9vs",preview:"Feed_preview__1x2dA",title:"Feed_title__16Tjb",link:"Feed_link__3tQwk",meta:"Feed_meta__2AnPQ",info:"Feed_info__EY-P_",avatar:"Feed_avatar__ahYAi",image:"Feed_image__4YUQZ"}},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(37),r=c.n(n),i=c(3),l=c(2),o=c(7),j=c(0),u={isLoading:!1,isLoginedIn:null,currentUser:null},b=function(e,t){switch(t.type){case"LOADING":return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0});case"SET_AUTHORIZED":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!0,isLoading:!1,currentUser:t.payload});case"SET_UNAUTHORIZED":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1});case"LOGOUT":return Object(o.a)(Object(o.a)({},u),{},{isLoggedIn:!1});default:return e}},d=Object(a.createContext)([{},function(){}]),O=function(e){var t=e.children,c=Object(a.useReducer)(b,u);return Object(j.jsx)(d.Provider,{value:c,children:t})},m=c(6),x=c.n(m),h=function(){var e=Object(a.useContext)(d),t=Object(l.a)(e,1)[0];return Object(j.jsx)("nav",{className:x.a.nav,children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(i.b,{className:x.a.logo,to:"/",children:"Medium"}),Object(j.jsxs)("ul",{className:x.a.list,children:[Object(j.jsx)("li",{className:x.a.item,children:Object(j.jsx)(i.c,{to:"/",className:x.a.link,activeClassName:x.a.active,exact:!0,children:"Home"})}),!1===t.isLoggedIn&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"list__item item",children:Object(j.jsx)(i.c,{to:"/login",className:x.a.link,activeClassName:x.a.active,children:"Sign in"})}),Object(j.jsx)("li",{className:"list__item item",children:Object(j.jsx)(i.c,{to:"/register",className:x.a.link,activeClassName:x.a.active,children:"Sign up"})})]}),t.isLoggedIn&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:x.a.item,children:Object(j.jsxs)(i.c,{to:"/article/new",className:x.a.link,children:[Object(j.jsx)("ion-icon",{name:"create-outline"}),"\xa0New post"]})}),Object(j.jsx)("li",{className:x.a.item,children:Object(j.jsxs)(i.c,{to:"/settings",className:x.a.link,children:[Object(j.jsx)("ion-icon",{name:"settings-outline"}),"\xa0Settings"]})}),Object(j.jsx)("li",{className:x.a.item,children:Object(j.jsxs)(i.c,{to:"/profiles/".concat(t.currentUser.username),className:x.a.link,children:[Object(j.jsx)("div",{className:x.a.avatar,children:Object(j.jsx)("img",{className:x.a.image,src:t.currentUser.image||"https://static.productionready.io/images/smiley-cyrus.jpg",alt:"user avatar"})}),t.currentUser.username]})})]})]})]})})},f=c(39),g=c.n(f),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(a.useState)((function(){return localStorage.getItem(e)||t})),s=Object(l.a)(c,2),n=s[0],r=s[1];return Object(a.useEffect)((function(){localStorage.setItem(e,n)}),[n,e]),[n,r]},_=function(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(null),i=Object(l.a)(r,2),j=i[0],u=i[1],b=Object(a.useState)(null),d=Object(l.a)(b,2),O=d[0],m=d[1],x=Object(a.useState)({}),h=Object(l.a)(x,2),f=h[0],_=h[1],v=p("token"),N=Object(l.a)(v,1)[0],k=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(e),n(!0)}),[]);return Object(a.useEffect)((function(){var t=!1,c=Object(o.a)(Object(o.a)({},f),{headers:{authorization:N?"Token ".concat(N):""}});return!!s&&(g()("https://conduit.productionready.io/api"+e,c).then((function(e){t||(u(e.data),n(!1))})).catch((function(e){t||(m(e.response.data),n(!1))})),function(){t=!0})}),[s,f,e]),[{isLoading:s,response:j,error:O},k]},v=function(e){var t=e.children,c=_("/user"),s=Object(l.a)(c,2),n=s[0].response,r=s[1],i=Object(a.useContext)(d),o=Object(l.a)(i,2)[1],j=p("token"),u=Object(l.a)(j,1)[0];return Object(a.useEffect)((function(){u?(r(),o({type:"LOADING"})):o({type:"SET_UNAUTHORIZED"})}),[o,r,u]),Object(a.useEffect)((function(){n&&o({type:"SET_AUTHORIZED",payload:n.user})}),[n,o]),t},N=c(4),k=c(14),y=(c(81),function(e){var t=e.tagName,c=void 0===t?"":t,s=Object(a.useContext)(d),n=Object(l.a)(s,1)[0];return Object(j.jsx)("div",{className:"feed-toggle",children:Object(j.jsxs)("ul",{className:"feed-toggle__list",children:[n.isLoggedIn&&Object(j.jsx)("li",{className:"feed-toggle__item",children:Object(j.jsx)(i.c,{to:"/feed",className:"feed-toggle__link",children:"Your feed"})}),Object(j.jsx)("li",{className:"feed-toggle__item",children:Object(j.jsx)(i.c,{to:"/",className:"feed-toggle__link",exact:!0,children:"Global feed"})}),c&&Object(j.jsx)("li",{className:"feed-toggle__item",children:Object(j.jsxs)(i.c,{to:"/tags/".concat(c),className:"feed-toggle__link",children:["#",c]})})]})})}),S=function(e){var t=e.tags;return Object(j.jsx)("ul",{className:"article__tag-list",children:t.map((function(e){return Object(j.jsx)("li",{className:"article__tag-item",children:e},e)}))})},E=c(21),C=c.n(E),L=function(e){var t=e.isFavorite,c=e.favoritesCount,a=e.articleSlug,s="/articles/".concat(a,"/favorite"),n=_(s),r=Object(l.a)(n,2),i=r[0].response,o=r[1],u=i?i.article.favoritesCount:c,b=i?i.article.favorited:t,d=C()({btn:!0,"btn-sm":!0,"btn-primary":b,"btn-outline-primary":!b});return Object(j.jsxs)("button",{type:"submit",className:d,onClick:function(e){console.log("click"),e.preventDefault(),o({method:b?"delete":"post"})},children:[Object(j.jsx)("ion-icon",{name:"heart-outline"}),Object(j.jsx)("span",{children:u})]})},T=c(8),w=c.n(T),U=function(e){var t=e.articles;return Object(j.jsx)("div",{className:w.a.article,children:t.map((function(e,t){return Object(j.jsxs)("div",{className:w.a.preview,children:[Object(j.jsxs)("div",{className:w.a.meta,children:[Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(i.b,{to:"/profiles/".concat(e.author.username),className:w.a.link,children:Object(j.jsx)("div",{className:w.a.avatar,children:Object(j.jsx)("img",{src:e.author.image,alt:"author avatar",className:w.a.image})})}),Object(j.jsxs)("div",{className:w.a.info,children:[Object(j.jsx)(i.b,{to:"/profiles/".concat(e.author.username),className:w.a.link,children:e.author.username}),Object(j.jsx)("span",{className:w.a.data,children:e.createdAt})]})]}),Object(j.jsx)("div",{className:w.a.like,children:Object(j.jsx)(L,{isFavorite:e.favorited,favoritesCount:e.favoritesCount,articleSlug:e.slug})})]}),Object(j.jsxs)(i.b,{to:"/articles/".concat(e.slug),className:w.a.link,children:[Object(j.jsx)("h1",{className:w.a.title,children:e.title}),Object(j.jsx)("p",{className:w.a.description,children:e.description}),Object(j.jsx)("span",{className:w.a.more,children:"Read more..."}),Object(j.jsx)(S,{tags:e.tagList})]})]},t)}))})},F=c(40),I=10,P=function(e){var t=Object(k.parse)(e),c=t.page?Number(t.page):1;return{currentPage:c,offset:c*I-I}},A=(c(82),function(e){var t=e.page,c=e.currentPage,a=e.url,s=C()({"":!0,active:c===t});return Object(j.jsx)("li",{className:s,children:Object(j.jsx)(i.b,{to:"".concat(a,"?page=").concat(t),className:"pagination__link",children:t})})}),B=function(e){var t,c,a=e.total,s=e.limit,n=e.url,r=e.currentPage,i=Math.ceil(a/s),l=(t=1,c=i,Object(F.a)(Array(c).keys()).map((function(e){return e+t}))),o=function(e,t){var c=[1,2,e-1,e];t>1&&t<e&&c.push(t-1,t,t+1);var a=[];return c.forEach((function(e){a.includes(e)||a.push(e)})),a}(i,r).sort();return console.log(o),Object(j.jsx)("ul",{className:"pagination",children:l.map((function(e){return!!o.includes(e)&&Object(j.jsx)(A,{page:e,currentPage:r,url:n},e)}))})},D=function(){return Object(j.jsx)("div",{children:"Loading..."})},M=function(){return Object(j.jsx)("div",{children:"Something went wrong"})},R=(c(83),function(){var e=_("/tags"),t=Object(l.a)(e,2),c=t[0],s=c.response,n=c.isLoading,r=c.error,o=t[1];return Object(a.useEffect)((function(){o()}),[o]),n||!s?Object(j.jsx)(D,{}):(console.log(s),r?Object(j.jsx)(M,{}):Object(j.jsxs)("div",{className:"tags",children:[Object(j.jsx)("p",{className:"tags__title",children:"Popular Tags"}),Object(j.jsx)("div",{className:"tags__list",children:s.tags.map((function(e){return Object(j.jsx)(i.b,{to:"/tag/".concat(e),className:"tags__link",children:e},e)}))})]}))}),H=c(15),Z=c.n(H),G=function(e){var t=e.location,c=e.match,s=P(t.search),n=s.offset,r=s.currentPage,i=Object(k.stringify)({limit:I,offset:n}),o="/articles?".concat(i),u=_(o),b=Object(l.a)(u,2),d=b[0],O=d.response,m=d.isLoading,x=d.error,h=b[1],f=c.url;return Object(a.useEffect)((function(){h()}),[h,r]),Object(j.jsxs)("main",{className:Z.a.main,children:[Object(j.jsx)("div",{className:Z.a.banner,children:Object(j.jsxs)("div",{className:"container--col",children:[Object(j.jsx)("h1",{className:Z.a.title,children:"Medium Clone"}),Object(j.jsx)("p",{className:Z.a.subTitle,children:"A place to share knowledge"})]})}),Object(j.jsxs)("div",{className:Z.a.content,children:[Object(j.jsxs)("section",{className:Z.a.feeds,children:[Object(j.jsx)(y,{}),m&&Object(j.jsx)(D,{}),x&&Object(j.jsx)(M,{}),!m&&O&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{articles:O.articles}),Object(j.jsx)(B,{total:O.articlesCount,limit:I,url:f,currentPage:r})]})]}),Object(j.jsx)("aside",{className:Z.a.widgets,children:Object(j.jsx)(R,{})})]})]})},J=function(e){var t=e.match.params.slug,c="/articles/".concat(t),s=_(c),n=Object(l.a)(s,2),r=n[0],o=r.response,u=r.isLoading,b=r.error,O=n[1],m=_(c),x=Object(l.a)(m,2),h=x[0].response,f=x[1],g=Object(a.useContext)(d),p=Object(l.a)(g,1)[0],v=Object(a.useState)(!1),k=Object(l.a)(v,2),y=k[0],E=k[1];return Object(a.useEffect)((function(){O()}),[O]),Object(a.useEffect)((function(){h&&E(!0)}),[h]),y?Object(j.jsx)(N.a,{to:"/"}):Object(j.jsxs)("div",{className:"article",children:[Object(j.jsxs)("div",{className:"article__bunner",children:[u&&Object(j.jsx)(D,{}),b&&Object(j.jsx)(M,{}),!u&&o&&Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{children:o.article.title}),Object(j.jsxs)("div",{className:"article__meta",children:[Object(j.jsx)(i.b,{to:"/profiles/".concat(o.article.author.username),children:Object(j.jsx)("img",{className:"avatar__img",src:o.article.author.image,alt:"avatar"})}),Object(j.jsx)("span",{className:"article__date",children:o.article.createdAt})]}),!(!o||!p.isLoggedIn)&&o.article.author.username===p.currentUser.username&&Object(j.jsxs)("span",{children:[Object(j.jsx)(i.b,{className:"button",to:"/articles/".concat(o.article.slug,"/edit"),children:"Edit"}),Object(j.jsx)("button",{type:"submit",className:"",onClick:function(){f({method:"delete"})},children:"Delete"})]})]})]}),Object(j.jsxs)("div",{className:"container",children:[u&&Object(j.jsx)(D,{}),b&&Object(j.jsx)(M,{}),!u&&o&&Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("div",{className:"",children:Object(j.jsx)("p",{children:o.article.body})}),Object(j.jsx)(S,{tags:o.article.tagList})]})]})]})},V=c(19),W=c.n(V),Y=function(e){var t=e.backendErrors;if(!t)return Object(j.jsx)("span",{className:W.a.item,children:"Server is not a response"});var c=Object.keys(t).map((function(e){for(var c=0;c<=t[e].length;c+=1){var a=t[e][c];return Object(j.jsx)("li",{className:W.a.item,children:"".concat(e,": ").concat(a)},e+(c+1))}return Object(j.jsx)("span",{className:W.a.item,children:"No errors"})}));return Object(j.jsx)("ul",{className:W.a.list,children:c})},Q=c(9),q=c.n(Q),z=function(e){var t="/login"===e.match.path,c=t?"Sign In":"Sign Up",s=t?"/register":"/login",n=t?"Need an account?":"Have an account?",r=t?"/user/login":"/users",o=Object(a.useState)(""),u=Object(l.a)(o,2),b=u[0],O=u[1],m=Object(a.useState)(""),x=Object(l.a)(m,2),h=x[0],f=x[1],g=Object(a.useState)(""),v=Object(l.a)(g,2),k=v[0],y=v[1],S=Object(a.useState)(!1),E=Object(l.a)(S,2),C=E[0],L=E[1],T=_(r),w=Object(l.a)(T,2),U=w[0],F=U.response,I=U.isLoading,P=U.error,A=w[1],B=p("token"),D=Object(l.a)(B,2)[1],M=Object(a.useContext)(d),R=Object(l.a)(M,2)[1];return Object(a.useEffect)((function(){F&&(D(F.user.token),L(!0),R({type:"SET_AUTHORIZED",payload:F.user}))}),[F,D,R]),C?Object(j.jsx)(N.a,{to:"/"}):Object(j.jsx)("div",{className:q.a.authPage,children:Object(j.jsxs)("div",{className:"container--col",children:[Object(j.jsx)("h2",{className:q.a.title,children:c}),Object(j.jsx)("p",{className:q.a.question,children:Object(j.jsx)(i.b,{className:q.a.questionLink,to:s,children:n})}),Object(j.jsxs)("form",{className:q.a.form,onSubmit:function(e){e.preventDefault(),A({method:"POST",data:{user:t?{email:b,password:h}:{email:b,password:h,username:k}}})},children:[P&&Object(j.jsx)(Y,{backendErrors:P.errors}),Object(j.jsxs)("fieldset",{className:q.a.field,children:[!t&&Object(j.jsx)("fieldset",{className:q.a.field,children:Object(j.jsx)("input",{className:q.a.inputText,type:"text",placeholder:"Name",value:k,onChange:function(e){return y(e.target.value)}})}),Object(j.jsx)("fieldset",{className:q.a.field,children:Object(j.jsx)("input",{className:q.a.inputText,type:"email",placeholder:"E-mail",value:b,onChange:function(e){return O(e.target.value)}})}),Object(j.jsx)("fieldset",{className:q.a.field,children:Object(j.jsx)("input",{className:q.a.inputText,type:"password",placeholder:"Password",value:h,onChange:function(e){return f(e.target.value)}})}),Object(j.jsx)("button",{type:"submit",className:q.a.button,disabled:I,children:c})]})]})]})})},K=function(e){var t=e.location,c=e.match,s=c.params.slug,n=P(t.search),r=n.offset,i=n.currentPage,o=Object(k.stringify)({limit:I,offset:r,tag:s}),u="/articles?".concat(o),b=_(u),d=Object(l.a)(b,2),O=d[0],m=O.response,x=O.isLoading,h=O.error,f=d[1],g=c.url;return Object(a.useEffect)((function(){f()}),[f,i,s]),Object(j.jsxs)("main",{className:"main",children:[Object(j.jsx)("div",{className:"banner",children:Object(j.jsxs)("div",{className:"container--col",children:[Object(j.jsx)("h1",{children:"Medium Clone"}),Object(j.jsx)("p",{children:"A place to share knowledge"})]})}),Object(j.jsxs)("div",{className:"content",children:[Object(j.jsxs)("section",{className:"content__feeds feeds",children:[Object(j.jsx)(y,{tagName:s}),x&&Object(j.jsx)(D,{}),h&&Object(j.jsx)(M,{}),!x&&m&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{articles:m.articles}),Object(j.jsx)(B,{total:m.articlesCount,limit:I,url:g,currentPage:i})]})]}),Object(j.jsx)("aside",{className:"content__widgets widgets",children:Object(j.jsx)(R,{})})]})]})},X=function(e){var t=e.location,c=e.match,s=P(t.search),n=s.offset,r=s.currentPage,i=Object(k.stringify)({limit:I,offset:n}),o="/articles/feed?".concat(i),u=_(o),b=Object(l.a)(u,2),d=b[0],O=d.response,m=d.isLoading,x=d.error,h=b[1],f=c.url;return Object(a.useEffect)((function(){h()}),[h,r]),Object(j.jsxs)("main",{className:"main",children:[Object(j.jsx)("div",{className:"banner",children:Object(j.jsxs)("div",{className:"container--col",children:[Object(j.jsx)("h1",{children:"Medium Clone"}),Object(j.jsx)("p",{children:"A place to share knowledge"})]})}),Object(j.jsxs)("div",{className:"content",children:[Object(j.jsxs)("section",{className:"content__feeds feeds",children:[Object(j.jsx)(y,{}),m&&Object(j.jsx)(D,{}),x&&Object(j.jsx)(M,{}),!m&&O&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{articles:O.articles}),Object(j.jsx)(B,{total:O.articlesCount,limit:I,url:f,currentPage:r})]})]}),Object(j.jsx)("aside",{className:"content__widgets widgets",children:Object(j.jsx)(R,{})})]})]})},$=function(e){var t=e.onSubmit,c=e.errors,s=e.initialValues,n=Object(a.useState)(""),r=Object(l.a)(n,2),i=r[0],o=r[1],u=Object(a.useState)(""),b=Object(l.a)(u,2),d=b[0],O=b[1],m=Object(a.useState)(""),x=Object(l.a)(m,2),h=x[0],f=x[1],g=Object(a.useState)(""),p=Object(l.a)(g,2),_=p[0],v=p[1];return Object(a.useEffect)((function(){s&&(o(s.title),f(s.description),O(s.body),v(s.tagList.join(" ")))}),[s]),Object(j.jsx)("div",{className:"",children:Object(j.jsx)("div",{className:"",children:Object(j.jsxs)("div",{className:"article",children:[c&&Object(j.jsx)(Y,{backendErrors:c}),Object(j.jsxs)("form",{className:"article__form",onSubmit:function(e){e.preventDefault();var c={title:i,body:d,description:h,tagList:_.split(" ")};t(c)},children:[Object(j.jsxs)("fieldset",{className:"article__info",children:[Object(j.jsx)("input",{type:"text",className:"article__text",placeholder:"Article title",value:i,onChange:function(e){return o(e.target.value)}}),Object(j.jsx)("input",{type:"text",className:"article__text",placeholder:"What is this article about?",value:h,onChange:function(e){return f(e.target.value)}}),Object(j.jsx)("textarea",{className:"article__textarea",rows:"8",placeholder:"Write your article",value:d,onChange:function(e){return O(e.target.value)}}),Object(j.jsx)("input",{type:"text",className:"article__text",placeholder:"Enter tags",value:_,onChange:function(e){return v(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",className:"article__submit",children:"Publish article"})]})]})})})},ee=function(){var e=_("/articles"),t=Object(l.a)(e,2),c=t[0],s=c.response,n=c.error,r=t[1],i=Object(a.useContext)(d),o=Object(l.a)(i,1)[0],u=Object(a.useState)(!1),b=Object(l.a)(u,2),O=b[0],m=b[1];return Object(a.useEffect)((function(){s&&m(!0)}),[s]),!1===o.isLoggedIn?Object(j.jsx)(N.a,{to:"/"}):O?Object(j.jsx)(N.a,{to:"/articles/".concat(s.article.slug)}):Object(j.jsx)("div",{children:Object(j.jsx)($,{errors:n&&n.errors||{},initialValues:{title:"",body:"",description:"",tagList:[]},onSubmit:function(e){r({method:"post",data:{article:e}})}})})},te=function(e){var t=e.match.params.slug,c="/articles/".concat(t),s=_(c),n=Object(l.a)(s,2),r=n[0].response,i=n[1],o=_(c),u=Object(l.a)(o,2),b=u[0],O=b.response,m=b.error,x=u[1],h=Object(a.useContext)(d),f=Object(l.a)(h,1)[0],g=Object(a.useState)(null),p=Object(l.a)(g,2),v=p[0],k=p[1],y=Object(a.useState)(!1),S=Object(l.a)(y,2),E=S[0],C=S[1];return Object(a.useEffect)((function(){i()}),[i]),Object(a.useEffect)((function(){r&&k({title:r.article.title,description:r.article.description,body:r.article.body,tagList:r.article.tagList})}),[r]),Object(a.useEffect)((function(){O&&C(!0)}),[O]),!1===f.isLoggedIn?Object(j.jsx)(N.a,{to:"/"}):E?Object(j.jsx)(N.a,{to:"/articles/".concat(t)}):Object(j.jsx)("div",{children:Object(j.jsx)($,{errors:m&&m.errors||{},initialValues:v,onSubmit:function(e){x({method:"put",data:{article:e}})}})})},ce=function(){var e=Object(a.useContext)(d),t=Object(l.a)(e,2),c=t[0],s=t[1],n=_("/user"),r=Object(l.a)(n,2),i=r[0],u=i.response,b=i.error,O=r[1],m=Object(a.useState)(""),x=Object(l.a)(m,2),h=x[0],f=x[1],g=Object(a.useState)(""),v=Object(l.a)(g,2),k=v[0],y=v[1],S=Object(a.useState)(""),E=Object(l.a)(S,2),C=E[0],L=E[1],T=Object(a.useState)(""),w=Object(l.a)(T,2),U=w[0],F=w[1],I=Object(a.useState)(""),P=Object(l.a)(I,2),A=P[0],B=P[1],D=Object(a.useState)(!1),M=Object(l.a)(D,2),R=M[0],H=M[1],Z=p("token"),G=Object(l.a)(Z,2)[1];return Object(a.useEffect)((function(){c.currentUser&&(f(c.currentUser.image),y(c.currentUser.username),L(c.currentUser.bio),F(c.currentUser.email))}),[c.currentUser]),Object(a.useEffect)((function(){u&&s({type:"SET_AUTHORIZED",payload:u.user})}),[u,s]),R?Object(j.jsx)(N.a,{to:"/"}):Object(j.jsx)("div",{className:"",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{className:"",children:"Your settings"}),b&&Object(j.jsx)(Y,{backendErrors:b.errors}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O({method:"put",data:{user:Object(o.a)(Object(o.a)({},c.currentUser),{},{image:h,username:k,email:U,bio:C,password:A})}})},children:[Object(j.jsxs)("fieldset",{className:"",children:[Object(j.jsx)("input",{type:"text",className:"",placeholder:"Url of profile picture",value:h,onChange:function(e){return f(e.target.value)}}),Object(j.jsx)("input",{type:"text",className:"",placeholder:"Username",value:k,onChange:function(e){return y(e.target.value)}}),Object(j.jsx)("textarea",{className:"",rows:"8",placeholder:"Short bio",value:C,onChange:function(e){return L(e.target.value)}}),Object(j.jsx)("input",{type:"text",className:"",placeholder:"Email",value:U,onChange:function(e){return F(e.target.value)}}),Object(j.jsx)("input",{type:"password",className:"",placeholder:"Password",value:A,onChange:function(e){return B(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",className:"",children:"Update settings"})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("button",{type:"submit",className:"btn btn-outline-danger",onClick:function(e){e.preventDefault(),G(""),s({type:"LOGOUT"}),H(!0)},children:"Log Out"})]})})},ae=function(e){var t=e.username,c=e.location,s=e.isFavorites,n=e.url,r=P(c.search),i=r.offset,o=r.currentPage,u=function(e){var t=e.username,c=e.offset,a=e.isFavorites?{limit:I,offset:c,favorited:t}:{limit:I,offset:c,author:t};return"/articles?".concat(Object(k.stringify)(a))}({username:t,offset:i,isFavorites:s}),b=_(u),d=Object(l.a)(b,2),O=d[0],m=O.response,x=O.isLoading,h=O.error,f=d[1];return Object(a.useEffect)((function(){f()}),[f,s]),Object(j.jsxs)("div",{children:[x&&Object(j.jsx)(D,{}),h&&Object(j.jsx)(M,{}),!x&&m&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{articles:m.articles}),Object(j.jsx)(B,{total:m.articlesCount,limit:I,url:n,currentPage:o})]})]})},se=function(e){var t=e.match,c=e.location,s=t.params.slug,n=c.pathname.includes("favorites"),r="/profiles/".concat(s),o=_(r),u=Object(l.a)(o,2),b=u[0].response,d=u[1];return Object(a.useEffect)((function(){d()}),[d]),console.log("\u044f \u0442\u0443\u0442",b),b?Object(j.jsxs)("div",{className:"profile-page user",children:[Object(j.jsx)("div",{className:"user__info",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("img",{className:"user__avatar",alt:"user avatar",src:b.profile.image}),Object(j.jsx)("h4",{children:b.profile.userName}),Object(j.jsx)("p",{children:b.profile.bio})]})}),Object(j.jsx)("div",{className:"container articles",children:Object(j.jsx)("ul",{className:"articles__toggle",children:Object(j.jsxs)("li",{className:"articles__item",children:[Object(j.jsx)(i.c,{className:"articles__link",to:"/profiles/".concat(b.profile.username),exact:!0,children:"My posts"}),Object(j.jsx)(i.c,{className:"articles__link",to:"/profiles/".concat(b.profile.username,"/favorites"),children:"Favorite posts"})]})})}),Object(j.jsx)(ae,{username:b.profile.username,location:c,isFavorites:n,url:t.url})]}):null},ne=function(){return Object(j.jsxs)(N.d,{children:[Object(j.jsx)(N.b,{path:"/",component:G,exact:!0}),Object(j.jsx)(N.b,{path:"/profiles/:slug/",component:se}),Object(j.jsx)(N.b,{path:"/profiles/:slug/favorite",component:se}),Object(j.jsx)(N.b,{path:"/settings",component:ce}),Object(j.jsx)(N.b,{path:"/article/new",component:ee}),Object(j.jsx)(N.b,{path:"/articles/:slug/edit",component:te}),Object(j.jsx)(N.b,{path:"/feed",component:X}),Object(j.jsx)(N.b,{path:"/tag/:slug",component:K}),Object(j.jsx)(N.b,{path:"/login",component:z}),Object(j.jsx)(N.b,{path:"/register",component:z}),Object(j.jsx)(N.b,{path:"/articles/:slug",component:J})]})},re=(c(84),function(){return Object(j.jsx)(O,{children:Object(j.jsx)(v,{children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(h,{}),Object(j.jsx)(ne,{})]})})})});r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(re,{})}),document.getElementById("root"))},9:function(e,t,c){e.exports={container:"authentication_container__2n77a","container--col":"authentication_container--col__QFMUO",button:"authentication_button__38zk1","auth-page":"authentication_auth-page__33DUm",title:"authentication_title__nDW-f",questionLink:"authentication_questionLink__1zhhO",field:"authentication_field__cRFR3",inputText:"authentication_inputText__1_K11"}}},[[85,1,2]]]);
//# sourceMappingURL=main.86e95ee0.chunk.js.map